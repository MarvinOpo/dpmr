<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
<script src="https://www.chartjs.org/samples/latest/utils.js"></script>
<!DOCTYPE html>
<html lang="en">

<head>
    <title> DOH DPMR </title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" type="images/png" href="images/icons/doh-logo.ico">

    <!-- Fonts and icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" />
    <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">

    <!-- CSS Files -->
    <link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/dashboard.css?v=2.0.1" />
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/yearpicker.css">

</head>

<body>
    <div class="wrapper">
        <div class="sidebar" data-image="images/bg-03.jpg" data-color="green">
            <div class="sidebar-wrapper">
                <div class="logo">
                    <a href="http://localhost:3000" class="simple-text">
                        DOH DPMR
                    </a>
                </div>
                <ul class="nav">
                    <li class="nav-item active">
                        <a class="nav-link" href="dashboard.ejs">
                            <i class="nc-icon nc-chart-pie-35"></i>
                            <p class="m-b-0">Dashboard</p>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="main-panel">
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg " color-on-scroll="500">
                <div class=" container-fluid  ">
                    <a class="navbar-brand" href="#pablo"> Dashboard </a>
                    <button href="" class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                        aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-bar burger-lines"></span>
                        <span class="navbar-toggler-bar burger-lines"></span>
                        <span class="navbar-toggler-bar burger-lines"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-end" id="navigation">
                        <ul class="nav navbar-nav mr-auto">
                            <li class="nav-item">
                                <a href="#" class="nav-link" data-toggle="dropdown">
                                    <span class="d-lg-none">Dashboard</span>
                                </a>
                            </li>
                        </ul>
                        <ul class="navbar-nav ml-auto">
                            <!-- <li class="nav-item">
                                <a class="nav-link" href="#pablo">
                                    <span class="no-icon">Account</span>
                                </a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="http://example.com" id="navbarDropdownMenuLink"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <span class="no-icon">Dropdown</span>
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                    <a class="dropdown-item" href="#">Action</a>
                                    <a class="dropdown-item" href="#">Another action</a>
                                    <a class="dropdown-item" href="#">Something</a>
                                    <a class="dropdown-item" href="#">Something else here</a>
                                    <div class="divider"></div>
                                    <a class="dropdown-item" href="#">Separated link</a>
                                </div>
                            </li> -->
                            <li class="nav-item">
                                <a class="nav-link" href="/logout">
                                    <span class="no-icon">Log out</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <!-- End Navbar -->
            <div class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card bg-c-lite-green update-card">
                                <div class="card-block">
                                    <div class="row align-items-end">
                                        <div class="col-8">
                                            <h2 id="opd-total" class="text-white"><%- OPD.data.reduce(function(a, b) { return a + b; }) %></h2>
                                            <h5 class="text-white m-b-0">Total OPD Count</h5>
                                        </div>

                                        <div class="col-4 text-right">
                                            <iframe class="chartjs-hidden-iframe" tabindex="-1" style="display: block; overflow: hidden; border: 0px; margin: 0px; top: 0px; left: 0px; bottom: 0px; right: 0px; height: 100%; width: 100%; position: absolute; pointer-events: none; z-index: -1;"></iframe>
                                            <canvas id="update-chart-1" height="50" style="display: block; width: 91px; height: 50px;"
                                                width="91"></canvas>
                                        </div>
                                    </div>
                                </div>

                                <hr class="horizontal-line">

                                <div class="card-footer">
                                    <i class="fa fa-clock-o"></i>
                                    Last Update : 2:15 am

                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card bg-c-pink update-card">
                                <div class="card-block">
                                    <div class="row align-items-end">
                                        <div class="col-8">
                                            <h2 id="er-total" class="text-white"><%- ER.data.reduce(function(a, b) { return a + b; }) %></h2>
                                            <h5 class="text-white m-b-0">Total ER Count</h5>
                                        </div>
                                        <div class="col-4 text-right"><iframe class="chartjs-hidden-iframe" tabindex="-1"
                                                style="display: block; overflow: hidden; border: 0px; margin: 0px; top: 0px; left: 0px; bottom: 0px; right: 0px; height: 100%; width: 100%; position: absolute; pointer-events: none; z-index: -1;"></iframe>
                                            <canvas id="update-chart-2" height="50" width="91" style="display: block; width: 91px; height: 50px;"></canvas>
                                        </div>
                                    </div>
                                </div>

                                <hr class="horizontal-line">

                                <div class="card-footer">
                                    <i class="fa fa-clock-o"></i>
                                    Last Update : 2:15 am
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card bg-c-green update-card">
                                <div class="card-block">
                                    <div class="row align-items-end">
                                        <div class="col-8">
                                            <h2 id="adm-total" class="text-white"><%- ADM.data.reduce(function(a, b) { return a + b; }) %></h2>
                                            <h5 class="text-white m-b-0">Total ADM Count</h5>
                                        </div>
                                        <div class="col-4 text-right"><iframe class="chartjs-hidden-iframe" tabindex="-1"
                                                style="display: block; overflow: hidden; border: 0px; margin: 0px; top: 0px; left: 0px; bottom: 0px; right: 0px; height: 100%; width: 100%; position: absolute; pointer-events: none; z-index: -1;"></iframe>
                                            <canvas id="update-chart-2" height="50" width="91" style="display: block; width: 91px; height: 50px;"></canvas>
                                        </div>
                                    </div>
                                </div>

                                <hr class="horizontal-line">

                                <div class="card-footer">
                                    <i class="fa fa-clock-o"></i>
                                    Last Update : 2:15 am
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card card-tasks">
                                <div class="card-header ">
                                    <div style="text-align: center;">
                                        <select type="text" class="yearselect" style="margin-bottom: 20px"></select>
                                    </div>
                                    <h4 id="hospital-name" class="card-title">All Hospitals</h4>
                                    <p class="card-category">Encounter Statistic</p>
                                    
                                </div>
                                
                                <div class="card-body ">
                                    <canvas id="canvas" class="ct-chart"></canvas>
                                    <script>
                                        var context = document.getElementById("canvas").getContext('2d');
                                        var myChart = {
                                            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'],
                                            datasets: [{
                                                label: 'OPD',
                                                backgroundColor: window.chartColors.green,
                                                data:  <%- JSON.stringify(OPD.data) %>
                                            }, {
                                                label: 'ER',
                                                backgroundColor: window.chartColors.red,
                                                data:  <%- JSON.stringify(ER.data) %>
                                            }, {
                                                label: 'ADM',
                                                backgroundColor: '#0ac282',
                                                data:  <%- JSON.stringify(ADM.data) %>
                                            }]
                                        };

                                        window.myBar = new Chart(context, {
                                            type: 'bar',
                                            data: myChart,
                                            options: {
                                                tooltips: {
                                                    callbacks: {
                                                        label: function (tooltipItem, data) {
                                                            var label = data.datasets[tooltipItem.datasetIndex].label || '';

                                                            if (label) {
                                                                label += ': ';
                                                            }
                                                            label += Math.round(tooltipItem.yLabel * 100) / 100;
                                                            return label;
                                                        }
                                                    }
                                                },
                                                responsive: true,
                                                scales: {
                                                    xAxes: [{
                                                        stacked: false,
                                                    }],
                                                    yAxes: [{
                                                        stacked: false,
                                                        ticks: {
                                                            beginAtZero: true
                                                        }
                                                    }]
                                                }
                                            }
                                        });
                                    </script>
                                </div>

                                <div class="card-footer ">
                                    <hr>
                                    <div class="stats">
                                        <i class="fa fa-check"></i> Data information certified
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card card-tasks">
                                <div class="card-header ">
                                    <h4 class="card-title">Hospitals</h4>
                                    <p class="card-category">Select hospital to show report.</p>
                                </div>
                                <div class="card-body ">
                                    <div class="table-full-width">
                                        <table class="table">
                                            <tbody id = "hospital_container">
                                                    <tr >
                                                            <td>
                                                                <div class="form-check">
                                                                    <label class="form-check-label">
                                                                        <input id='' class="radio_input" type="radio" value="All Hospitals" checked="true" name="hospital">
                                                                    </label>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div class="media-body">
                                                                    <!-- <span class="media-meta pull-right"></span> -->
                                                                    <h5 class="hospital-name">
                                                                        All Hospitals
                                                                    </h5>
        
                                                                    <p class="m-b-0">
                                                                        
                                                                    </p>
                                                                </div>
                                                            </td>
                                                            <td class="td-actions text-right">
                                                                
                                                            </td>
                                                        </tr>

                                                <% for(var i = 0; i < hospitals.length; i++){ %>
                                                <tr >
                                                    <td>
                                                        <div class="form-check">
                                                            <label class="form-check-label">
                                                                <input id="<%- hospitals[i].hospital_code %>" class="radio_input" 
                                                                value="<%- hospitals[i].hospital_name %>" type="radio" name="hospital">
                                                            </label>
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="media-body">
                                                            <!-- <span class="media-meta pull-right"></span> -->
                                                            <h5 class="hospital-name">
                                                                <%- hospitals[i].hospital_name %>
                                                            </h5>

                                                            <p class="m-b-0">
                                                                <%- hospitals[i].hospital_address %>
                                                            </p>
                                                        </div>
                                                    </td>
                                                    <td class="td-actions text-right">
                                                        
                                                    </td>
                                                </tr>
                                                <% } %>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="card-footer ">
                                    <hr>
                                    <div class="stats">
                                        <i class="now-ui-icons loader_refresh spin"></i> Updated 3 minutes ago
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="footer">
                <div class="container">
                    <nav>
                        <!-- <ul class="footer-menu">
                            <li>
                                <a href="#">
                                    Home
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Company
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Portfolio
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Blog
                                </a>
                            </li>
                        </ul> -->
                        <p class="copyright text-center">
                            Â© 2019 <a href="http://portal.doh7.net">Department of Health</a>, Region VII
                        </p>
                    </nav>
                </div>
            </footer>
        </div>
    </div>
     
</body>
<!--   Core JS Files   -->
<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
<script src="vendor/bootstrap/js/popper.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>

<!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
<script src="js/plugins/bootstrap-switch.js"></script>

<!--  Notifications Plugin    -->
<script src="js/plugins/bootstrap-notify.js"></script>

<!-- Control Center for Light Bootstrap Dashboard: scripts for the example pages etc -->
<!-- <script src="js/dashboard.js?v=2.0.1" type="text/javascript"></script> -->

<script src="script/dashboard.js" type="text/javascript"></script>

<!-- <script src="js/yearpicker.js" async></script> -->

<script src="https://code.jquery.com/jquery.min.js"></script>
<script src="script/year-select.js"></script>

</html>